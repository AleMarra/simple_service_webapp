<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script>

	function getXMLDoc(url) {
		var httpRequest;
		if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
			httpRequest = new XMLHttpRequest();
		} else {// code for IE6, IE5
			httpRequest = new ActiveXObject("Microsoft.httpRequest");
		}
		httpRequest.onreadystatechange = function() {
			if (httpRequest.readyState == 4 && httpRequest.status == 200) {

				console.log(httpRequest.responseText);
				
				xmlDoc = httpRequest.responseXML;

				document.getElementById('User').innerHTML = xmlDoc
						.getElementsByTagName("user")[0].childNodes[0].nodeValue;
				document.getElementById('Name').innerHTML = xmlDoc
						.getElementsByTagName("fullName")[0].childNodes[0].nodeValue;
				document.getElementById('ID').innerHTML = xmlDoc
						.getElementsByTagName("id")[0].childNodes[0].nodeValue;
			}
		}
		httpRequest.open("GET", url, true);
		httpRequest.send();
	}

	function getJSON(url,fieldID,fieldName,fieldUser) {
		var httpRequest;
		if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
			httpRequest = new XMLHttpRequest();
		} else {// code for IE6, IE5
			httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
		}
		httpRequest.onreadystatechange = function() {
			
			if (httpRequest.readyState == 4) {

				 if (httpRequest.status != 200){
					document.getElementById('statusError').innerHTML = httpRequest.status;
					document.getElementById('messageError').innerHTML = httpRequest.responseText;
						
				}else{
					 
					console.log(httpRequest.responseText);
					// Javascript function JSON.parse to parse JSON data
					var jsonObj = JSON.parse(httpRequest.responseText);
	
					// jsonObj variable now contains the data structure and can
					// be accessed as jsonObj.name and jsonObj.country.
					document.getElementById(fieldUser).innerHTML = jsonObj.user;
					document.getElementById(fieldName).innerHTML = jsonObj.fullName;
					document.getElementById(fieldID).innerHTML = jsonObj.id;
					
					document.getElementById('status').innerHTML = httpRequest.status;
				}
			}
		}
		
		httpRequest.open("GET", url, true);
		httpRequest.send();
	}
	
	function postJSON(url) {
		var xmlhttp;
		if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
			xmlhttp = new XMLHttpRequest();
		} else {// code for IE6, IE5
			xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
		}
		
		xmlhttp.onreadystatechange = function() {
			if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

				console.log(xmlhttp.responseText);
				// Javascript function JSON.parse to parse JSON data
				var jsonObj = JSON.parse(xmlhttp.responseText);

				// jsonObj variable now contains the data structure and can
				// be accessed as jsonObj.name and jsonObj.country.
				document.getElementById('UserPosted').innerHTML = jsonObj.user;
				document.getElementById('NamePosted').innerHTML = jsonObj.fullName;
				document.getElementById('IDPosted').innerHTML = jsonObj.id;
			}
		}

		xmlhttp.open("POST", url);
		xmlhttp.setRequestHeader("Content-Type", "application/json");
		xmlhttp.send(JSON.stringify({id:5, user:"myUser", fullName:"myFullName"}));
	}

    function getDespegar() {
        $.ajax({
            url: 'userController/testRedirect',
            error: function (data) {
            	$('#despegar').html('<h4 style="color: red;">Error: '+ data.status + ' ' + data.statusText + '</h4>'+'<p>'+ data.responseText +'</p>');
                
            },
            success: function (data) {
                var arr = data.data;
                $despegar = $('#despegar');
                for (var i = 0; i < arr.length; ++i )
                    $despegar.append('<a href="https://maps.google.com/maps?ll=' + arr[i].geoLocation.latitude + ',' + arr[i].geoLocation.longitude + '&z=10">' + arr[i].name + '</a><br/>');
            }
        })
    }
    
	</script>
</head>
<body>

<section id="registeruser">
    <h2>registeruser test</h2>
    <form class="registeruser" action="api/registeruser" method="post">
        Usuario: <input type="text" name="username"><br>
        Contraseña: <input type="password" name="password"> <br>
        <input type="submit" value="Register">
    </form>
</section>

<section id="login">
    <h2>login test</h2>
    <form class="login" action="api/login" method="post">
        Usuario: <input type="text" name="username"><br>
        Contraseña: <input type="password" name="password"> <br>
        <input type="submit" value="Login">
    </form>
</section>

<section id="logout">
    <h2>logout test</h2>
    <form class="logout" action="api/logout" method="post">
        Usuario: <input type="text" name="username"><br>
        Contraseña: <input type="password" name="password"> <br>
        <input type="submit" value="Logout">
    </form>
</section>

<section id="activateUser">
    <h2>activateUser test</h2>
    <form class="activateUser" action="api/activateUser" method="post">
        Usuario: <input type="text" name="username"><br>
        Contraseña: <input type="password" name="password"> <br>
        <input type="submit" value="Activate">
    </form>
</section>

<section id="changePassword">
    <h2>changePassword test</h2>
    <form class="changePassword" action="api/changePassword" method="post">
        Usuario: <input type="text" name="username"><br>
        Contraseña: <input type="password" name="password"> <br>
        <input type="submit" value="Change">
    </form>
</section>

<section id="resetPassword">
    <h2>resetPassword test</h2>
    <form class="resetPassword" action="api/resetPassword" method="post">
        Usuario: <input type="text" name="username"><br>
        Contraseña: <input type="password" name="password"> <br>
        <input type="submit" value="Reset">
    </form>
</section>

<section id="disableAccount">
    <h2>disableAccount test</h2>
    <form class="disableAccount" action="api/disableAccount" method="post">
        Usuario: <input type="text" name="username"><br>
        Contraseña: <input type="password" name="password"> <br>
        <input type="submit" value="Disable">
    </form>
</section>

<section id="enableAccount">
    <h2>enableAccount test</h2>
    <form class="enableAccount" action="api/enableAccount" method="post">
        Usuario: <input type="text" name="username"><br>
        Contraseña: <input type="password" name="password"> <br>
        <input type="submit" value="Enable">
    </form>
</section>

<section id="enableAccountFromEmaill">
    <h2>enableAccount test</h2>
    <form class="enableAccountFromEmaill" action="api/enableAccountFromEmaill" method="post">
        Usuario: <input type="text" name="username"><br>
        Contraseña: <input type="password" name="password"> <br>
        <input type="submit" value="Enable">
    </form>
</section>
    
</body>
</html>
